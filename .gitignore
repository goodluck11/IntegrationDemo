HELP.md
target/
.mvn/wrapper/maven-wrapper.jar
!**/src/main/**/target/
!**/src/test/**/target/

### STS ###
.apt_generated
.classpath
.factorypath
.project
.settings
.springBeans
.sts4-cache

### IntelliJ IDEA ###
.idea
*.iws
*.iml
*.ipr

### NetBeans ###
/nbproject/private/
/nbbuild/
/dist/
/nbdist/
/.nb-gradle/
build/
!**/src/main/**/build/
!**/src/test/**/build/

### VS Code ###
.vscode/


<mxfile host="app.diagrams.net" modified="2025-10-26T00:00:00.000Z" agent="Claude" version="21.0.0">
  <diagram name="Business Flow" id="business-flow">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Flow 1: File Ingestion -->
        <mxCell id="flow1-title" value="Flow 1: File Ingestion" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="shared-folder" value="Shared Folder" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="120" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="file-processor" value="File Processor&lt;br&gt;(Lock, Read, Parse)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="280" y="110" width="140" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="batch-splitter" value="Batch Splitter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="480" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="message-queue-1" value="Message Queue&lt;br&gt;(Redis Stream)" style="shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="680" y="105" width="140" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="processed-folder" value="Processed Folder" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="490" y="230" width="100" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="failed-folder-1" value="Failed Folder" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="300" y="230" width="100" height="70" as="geometry" />
        </mxCell>
        
        <!-- Flow 1 Arrows -->
        <mxCell id="arrow-1-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="shared-folder" target="file-processor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-1-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="file-processor" target="batch-splitter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-1-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="batch-splitter" target="message-queue-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-1-4" value="Success" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#82b366;" edge="1" parent="1" source="batch-splitter" target="processed-folder">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-1-5" value="Error" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#b85450;" edge="1" parent="1" source="file-processor" target="failed-folder-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Flow 2: API Integration -->
        <mxCell id="flow2-title" value="Flow 2: API Integration &amp; Retry" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="message-queue-2" value="Message Queue&lt;br&gt;(Redis Stream)" style="shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="80" y="420" width="140" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="stream-consumer" value="Stream Consumer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="280" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="auth-check" value="Check Token&lt;br&gt;Cache" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="460" y="415" width="100" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="token-cache" value="Token Cache&lt;br&gt;(Redis)" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="470" y="540" width="80" height="70" as="geometry" />
        </mxCell>
        
        <mxCell id="auth-service" value="Auth Service&lt;br&gt;(Get Token)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="620" y="540" width="110" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="external-api" value="External API&lt;br&gt;(HTTP POST)" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="640" y="405" width="140" height="90" as="geometry" />
        </mxCell>
        
        <mxCell id="retry-logic" value="Retry Logic&lt;br&gt;(Circuit Breaker)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="850" y="425" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="success-records-db" value="Records&lt;br&gt;Database" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1040" y="290" width="100" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="failed-records-db" value="Records&lt;br&gt;Database" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1040" y="415" width="100" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="ack-queue" value="Send ACK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1240" y="345" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- Flow 2 Arrows -->
        <mxCell id="arrow-2-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="message-queue-2" target="stream-consumer">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="stream-consumer" target="auth-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-3" value="Not in cache" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="auth-check" target="token-cache">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="token-cache" target="auth-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-5" value="In cache" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="auth-check" target="external-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="external-api" target="retry-logic">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-7" value="Success" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#82b366;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="retry-logic" target="success-records-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-8" value="Final Failure" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#b85450;" edge="1" parent="1" source="retry-logic" target="failed-records-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-9" value="Retry" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#d79b00;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.55;entryY=0.95;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="retry-logic" target="external-api">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="910" y="390" />
              <mxPoint x="717" y="390" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-2-10" value="After logging" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="success-records-db" target="ack-queue">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-2-11" value="After logging" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="failed-records-db" target="ack-queue">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Flow 3: Retry Failed Records -->
        <mxCell id="flow3-title" value="Flow 3: Retry Failed Records" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="680" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="polling-scheduler" value="Polling Scheduler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="80" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="failed-records-db-3" value="Failed Records&lt;br&gt;Database" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="280" y="730" width="100" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="retry-processor" value="Retry Processor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="460" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Flow 3 Arrows -->
        <mxCell id="arrow-3-1" value="Poll" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="polling-scheduler" target="failed-records-db-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-3-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="failed-records-db-3" target="retry-processor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-3-3" value="Update retry fields" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="retry-processor" target="failed-records-db-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="520" y="820" />
              <mxPoint x="330" y="820" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Flow 4: Error Handling -->
        <mxCell id="flow4-title" value="Flow 4: Error Handling" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="880" width="280" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="error-channel" value="Error Channel" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="80" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="error-handler" value="Error Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="280" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="error-decision" value="File Error?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="480" y="930" width="100" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="metadata-cleanup" value="Metadata Store&lt;br&gt;Cleanup" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="660" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="file-mover" value="Move to Failed" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="860" y="940" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="failed-folder-4" value="Failed Folder" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1060" y="930" width="100" height="70" as="geometry" />
        </mxCell>
        
        <!-- Flow 4 Arrows -->
        <mxCell id="arrow-4-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="error-channel" target="error-handler">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-4-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="error-handler" target="error-decision">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-4-3" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="error-decision" target="metadata-cleanup">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-4-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="metadata-cleanup" target="file-mover">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow-4-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="file-mover" target="failed-folder-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1280" y="100" width="100" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-storage" value="Storage" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1280" y="140" width="80" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-process" value="Process" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1280" y="220" width="80" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-queue" value="Queue" style="shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1280" y="280" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-external" value="External" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1280" y="350" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-decision" value="Decision" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1290" y="420" width="60" height="60" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

