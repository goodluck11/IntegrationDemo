spring.application.name=IntegrationDemo

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password= ${REDIS_PASSWORD:}
spring.data.redis.lettuce.pool.max-active=10
spring.data.redis.lettuce.pool.max-idle=10

spring.datasource.hikari.pool-name=FileProcessorPool
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1

# Database Configuration
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:fileprocessor}
spring.datasource.username= ${DB_USERNAME:fileprocessor}
spring.datasource.password=${DB_PASSWORD:fileprocessor}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql= true

# File Processor Configuration
file-processor.inbox-path=${INBOX_PATH:/Users/onyii/Documents/development/java/data/inbox}
file-processor.processed-path=${PROCESSED_PATH:/Users/onyii/Documents/development/java/data/processed}
file-processor.error-path=${ERROR_PATH:/Users/onyii/Documents/development/java/data/error}
file-processor.batch-size=${BATCH_SIZE:100}
file-processor.max-retries=${MAX_RETRIES:5}
file-processor.retry-delay-ms=${RETRY_DELAY_MS:5000}
file-processor.max-retry-delay-ms=${MAX_RETRY_DELAY_MS:3600000}
file-processor.retry-lock-timeout-ms=${RETRY_LOCK_TIMEPOUT_MS:300000}
file-processor.retry-batch-size=${RETRY_BATCH_SIZE:10}

# Alert codes
file-processor.alert-error-codes=500,503,401,403

file-processor.auth-url=${AUTH_URL:https://api.example.com/auth}
file-processor.upload-url=${UPLOAD_URL:https://api.example.com/upload}
file-processor.username=${API_USERNAME}
file-processor.password=${API_PASSWORD}

file-processor.redis-queue.stream-key=${REDIS_STREAM_KEY:batch-upload-stream}
file-processor.redis-queue.consumer-group=${REDIS_CONSUMER_GROUP:upload-workers}
file-processor.redis-queue.batch-size=${REDIS_BATCH_SIZE:10}
file-processor.redis-queue.poll-timeout=${REDIS_POLL_TIMEOUT:5000}
file-processor.redis-queue.dlq-key=${REDIS_DLQ_KEY:batch-upload-dlq}

file-processor.http-client.max-connections=${HTTP_MAX_CONNECTIONS:50}
file-processor.http-client.connection-timeout=${HTTP_CONNECTION_TIMEOUT:5000}
file-processor.http-client.read-timeout=${HTTP_READ_TIMEOUT:30000}
file-processor.http-client.concurrent-uploads=${HTTP_CONCURRENT_UPLOADS:10}

# Logging
logging.level.com.zaxxer.hikari=INFO
logging.level.com.demo.integration.it=INFO
logging.level.org.springframework.integration=INFO
logging.pattern.console="%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
